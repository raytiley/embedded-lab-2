<!DOCTYPE html>
<html>
  <head>
    <title>Ray Tiley - Lab 2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <div class="container">
    <h1>Ray Tiley - Lab 2</h1>
    <hr />

    <h3>Question 1</h3>
      <table class="table">
        <thead>
          <tr>
            <th>Max Speed</th>
            <th>Kd</th>
            <th>Kp</th>
            <th>Rotations / sec</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>255</td>
            <td>2</td>
            <td>25</td>
            <td>1.333</td>
            <td>
              This was the max speed of my controller. Control seemed good. There was a bit of overshoot, but not much in the way of ocilation.
            </td>
          </tr>

          <tr>
            <td>150</td>
            <td>0</td>
            <td>25</td>
            <td>1.176</td>
            <td>
              Control was great. No overshoot that I could detect.
            </td>
          </tr>

          <tr>
            <td>75</td>
            <td>0</td>
            <td>25</td>
            <td>0.408</td>
            <td>
              Control was great. No overshoot, but obviously slow.
            </td>
          </tr>

          <tr>
            <td>25</td>
            <td>0</td>
            <td>105</td>
            <td>0.274</td>
            <td>
              This was the lowest speed I can drive my motor at. Control was great. No overshoot, but extremely slow.
            </td>
          </tr>
        </tbody>
      </table>

      <hr />
      <h3>Question 2</h3>
      <p>
        I couldn't find any noticeable difference when changing the step size. I tried values from 10 through 50 but wasn't able to detect any performance gains or loses in the accuracy of the controller. 
      </p>

      <hr />
      <h3>Question 3</h3>
      <p>*** I limited the Torque range to the maximum range of the motor output since my PWD controller would automatically restrict the motor output. This allows the graphs to make more sense. ***
      <img src="img/1kHz-PD-Controller.png" />

      <hr />
      <h3>Question 4</h3>

      <img src="img/50Hz-PD-Controller.png" />

      <p>
        Restricting the PD Controller to 50Hz caused the controller to overshoot the desired target by much more than when running at 1kHz. This is because the controller is not reacting often enough to changes in the reference position and velocity. This is a perfect simulation of how a system can behave if tasks start missing deadlines.
      </p>

      <img src="img/5Hz-PD-Controller.png" />
      <p>
        Restricting the PD Controller to 5Hz made the system unusable. For long distances it only seemed to ocilate around the target a bit, but for the short distance of 5 degrees it got stuck in an ocilating loop and never recovered.
      </p>

      <h3>Recap</h3>
      <p>
        I found this assignment fun, but struggled a bit with the PD Controller. I think most of this comes from lack of experience with C, and trouble getting long, int, and rounding errors to workout. How Kp is supposed to affect the PD Controller is lost of me. It seems like my system was working best when Kp was 0 and therefore removing the entire velocity adjustment from the equation.
      </p>
      <p>
        Its likely that the implementation of my equation is flawed somehow, especially my calculation of velocity since I didn't really try to work in the fact that it should really be a float and not just an integer. Also my motor contol limited the range of the motor, so there was no ill affect of my equation calculating torques outside the range of the motor. It would just go at max speed until the equation slowed the motor down. I think these factors made my system behave in such a way where the Kp and Kd gains didn't have much affect.
      </p>

    </div>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>